{% extends 'cabinet/cabinet_base.html' %}
{% block viewport %}
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
{% endblock %}
{% block title %}Добавление новой продажи | {{ block.super }}{% endblock %}
{% block content %}
  <div class="breadcrumb-container">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <ol class="breadcrumb">
            <li><a href="{% url 'dashboard:index' %}">Рабочий стол</a></li>
            <li><a href="{% url 'sale:list' %}">Список продаж</a></li>
            <li class="active">Добавление новой продажи</li>
          </ol>
        </div>
        <div class="clearfix"></div>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="row">
      <div class="page-top">
        <div class="col-md-12">
          <span class="page-top__title">Добавление новой продажи</span>
        </div>
        <div class="clearfix"></div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="panel panel-default">
          <div class="panel-body">
            <div class="panel-content">
              <form action="" role="form" class="form" id="js-form-sale-add" method="post">
                {% csrf_token %}
                <div class="col-md-12">
                  <p class="lead text-center text-info">ФИО представителя</p>
                </div>
                <div class="col-md-6">
                  <div class="form-group alert alert-info">
                    {{ form.user.email.label_tag }}
                    {{ form.user.email }}
                    {{ form.user.email.errors }}
                    <p class=" small">email для входа в кабинет клиента. Может быть ненастоящим.</p>
                  </div>
                  <div class="form-group">
                    {{ form.user.phone.label_tag }}
                    {{ form.user.phone }}
                    {{ form.user.phone.errors }}
                  </div>
                  <div class="form-group">
                    {{ form.user.password1.label_tag }}
                    {{ form.user.password1 }}
                    {{ form.user.password1.errors }}
                  </div>
                  <div class="form-group">
                    {{ form.user.password2.label_tag }}
                    {{ form.user.password2 }}
                    {{ form.user.password2.errors }}
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    {{ form.user.last_name.label_tag }}
                    {{ form.user.last_name }}
                    {{ form.user.last_name.errors }}
                  </div>
                  <div class="form-group">
                    {{ form.user.first_name.label_tag }}
                    {{ form.user.first_name }}
                    {{ form.user.first_name.errors }}
                  </div>
                  <div class="form-group">
                    {{ form.user.patronymic.label_tag }}
                    {{ form.user.patronymic }}
                    {{ form.user.patronymic.errors }}
                  </div>
                </div>
                <div class="clearfix"></div>
                <div class="col-md-12">
                  <p class="lead text-center text-info">Реквизиты организации</p>
                </div>
                <div class="col-md-6">
                  {{ form.sale.presale }}
                  {% if user.type == user.UserType.administrator %}
                  <div class="form-group">
                    <div class="col-lg-5">{{ form.sale.moderator.label_tag }}</div>
                    <div class="col-lg-7">{{ form.sale.moderator }}</div>
                    {{ form.sale.moderator.errors }}
                    <div class="clearfix"></div>
                  </div>
                  {% else %}
                    {{ form.sale.moderator }}
                    {{ form.sale.moderator.errors }}
                  {% endif %}
                  <div class="form-group alert alert-info">
                    {{ form.sale.sender_email.label_tag }}
                    {{ form.sale.sender_email }}
                    {{ form.sale.sender_email.errors }}
                    <p class="small">Сюда будут отправляться уведомления о выполнении заказов</p>
                  </div>
                  <div class="form-group alert alert-info">
                    {{ form.sale.phone_sms.label_tag }}
                    {{ form.sale.phone_sms }}
                    {{ form.sale.phone_sms.errors }}
                    <p class="small">На этот номер будут отправляться СМС уведомления о выполнении заказов. Номер должен быть формата <strong>79999999999</strong></p>
                  </div>
                  <div class="form-group">
                    {{ form.sale.city.label_tag }}
                    {{ form.sale.city }}
                    {{ form.sale.city.errors }}
                  </div>
                  <div class="form-group {% if user.manager_user and not user.manager_user.leader %}hide{% endif %}">
                    {{ form.sale.manager.label_tag }}
                    {{ form.sale.manager }}
                    {{ form.sale.manager.errors }}
                  </div>
                  <div class="form-group">
                    {{ form.sale.legal_name.label_tag }}
                    {{ form.sale.legal_name }}
                    {{ form.sale.legal_name.errors }}
                  </div>
                  <div class="form-group">
                    {{ form.sale.actual_name.label_tag }}
                    {{ form.sale.actual_name }}
                    {{ form.sale.actual_name.errors }}
                  </div>
                  <div class="form-group">
                    {{ form.sale.legal_address.label_tag }}
                    {{ form.sale.legal_address }}
                    {{ form.sale.legal_address.errors }}
                  </div>
                  <div class="form-group">
                    {{ form.sale.inn.label_tag }}
                    {{ form.sale.inn }}
                    {{ form.sale.inn.errors }}
                  </div>
                  <div class="form-group">
                    {{ form.sale.kpp.label_tag }}
                    {{ form.sale.kpp }}
                    {{ form.sale.kpp.errors }}
                  </div>
                  <div class="form-group">
                    {{ form.sale.ogrn.label_tag }}
                    {{ form.sale.ogrn }}
                    {{ form.sale.ogrn.errors }}
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    {{ form.sale.bank.label_tag }}
                    {{ form.sale.bank }}
                    {{ form.sale.bank.errors }}
                  </div>
                  <div class="form-group">
                    {{ form.sale.bik.label_tag }}
                    {{ form.sale.bik }}
                    {{ form.sale.bik.errors }}
                  </div>
                  <div class="form-group">
                    {{ form.sale.account.label_tag }}
                    {{ form.sale.account }}
                    {{ form.sale.account.errors }}
                  </div>
                  <div class="form-group">
                    {{ form.sale.account_cor.label_tag }}
                    {{ form.sale.account_cor }}
                    {{ form.sale.account_cor.errors }}
                  </div>
                  <div class="form-group">
                    {{ form.sale.leader.label_tag }}
                    {{ form.sale.leader }}
                    {{ form.sale.leader.errors }}
                  </div>
                  <div class="form-group">
                    {{ form.sale.leader_function.label_tag }}
                    {{ form.sale.leader_function }}
                    {{ form.sale.leader_function.errors }}
                  </div>
                  <div class="form-group">
                    {{ form.sale.work_basis.label_tag }}
                    {{ form.sale.work_basis }}
                    {{ form.sale.work_basis.errors }}
                  </div>
                  <div class="form-group">
                    {% load widget_tweaks %}
                    <h4>Преамбула к договору</h4>
                    <p>
                      "Название компании", именуемое в дальнейшем "Заказчик",<br>
                      в лице
                      {{ form.sale.signer_post_dec|attr:'placeholder:должность подписанта'|add_class:'signer-input' }}
                      {{ form.sale.signer_name_dec|attr:'placeholder:имя подписанта'|add_class:'signer-input' }},
                       действующего на основании
                      {{ form.sale.signer_doc_dec|attr:'placeholder:действует на основании'|add_class:'signer-input' }}
                    </p>
                  </div>
                  <div class="form-group alert alert-info">
                    {{ form.sale.hide_empty_point.label_tag }}
                    {{ form.sale.hide_empty_point }}
                    {{ form.sale.hide_empty_point.errors }}
                    <p class="small">Снять галочку если нужно показывать в отчёте клиента gps-точки
                    к которым не привязаны фотографии</p>
                  </div>
                </div>
                <div class="clearfix"></div>
                <div class="col-md-6">
                  <button type="submit" class="btn btn-save">Создать продажу</button>
                </div>
                <div class="clearfix"></div>
              </form>
            </div>
          </div>
        </div>
      </div>
      <div class="clearfix"></div>
    </div>
  </div>
{% endblock %}
